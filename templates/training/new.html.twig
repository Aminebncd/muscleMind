{% extends 'base.html.twig' %}

{% block title %}Hello TrainingController!{% endblock %}

{% block body %}

    {% if edit %}
        <div class="bg-primary/60 p-8 rounded-lg w-5/6 mt-10">
            <h1 class="text-center font-bold text-2xl px-2 py-4 mb-14">Now compose your own workout session!</h1>

            <div class="text-center mb-4">
                <p class="text-white text-3xl mb-8">{{ program }}</p>

                <div class="flex justify-around items-center overflow-hidden max-sm:flex-col">
                    <a class="relative h-auto w-1/3 object-cover hover:ease-out hover:scale-105 duration-100 max-sm:w-full max-sm:h-1/6 flex max-sm:justify-center max-sm:mb-8 group" href="{{ path('app_muscleGroup_details', {'id': program.muscleGroupTargeted.id })}}">
                        <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent rounded-lg hover:opacity-80 transition-opacity duration-300 max-sm:w-1/2 max-sm:left-1/4"></div>
                        <span class="text-quinary stroke font-bold absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden group-hover:block ">{{program.muscleGroupTargeted}}</span>
                        <img class="rounded-lg max-sm:w-1/2" src="{{ asset('img/muscleGroups/' ~ program.muscleGroupTargeted.muscleGroupImage ) }}" alt="{{program.muscleGroupTargeted.muscleGroupImage()}}">
                    </a>
            
                    <a class="relative h-auto w-1/3 object-cover hover:ease-out hover:scale-105 duration-100 max-sm:w-full max-sm:h-1/6 flex max-sm:justify-center  group" href="{{ path('app_muscleGroup_details', {'id': program.secondaryMuscleGroupTargeted.id })}}">
                        <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent rounded-lg hover:opacity-80 transition-opacity duration-300 max-sm:w-1/2 max-sm:left-1/4"></div>
                        <span class="text-quaternary stroke font-bold absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden group-hover:block">{{program.secondaryMuscleGroupTargeted}}</span>
                        <img class="rounded-lg max-sm:w-1/2" src="{{ asset('img/muscleGroups/' ~ program.secondaryMuscleGroupTargeted.muscleGroupImage ) }}" alt="{{program.secondaryMuscleGroupTargeted.muscleGroupImage()}}">
                    </a>
                </div>
                {# <p class="text-white">{{ program.muscleGroupTargeted }} - {{ program.secondaryMuscleGroupTargeted }}</p> #}
            </div>

            <div class="my-8">
                {% for workout in workoutPlans %}
                {% if workout.exercice.target.muscleGroup == program.muscleGroupTargeted %}
                    <p class="text-white">
                        <a href="{{path ('app_exercice_details', {'id': workout.exercice.id} )}}" class="text-quinary hover:underline">{{ workout }}</a>
                        <span> : {{workout.numberOfRepetitions}} reps of {{workout.weightsUsed}}kgs</span>
                        <a href="{{ path('removeWP_Program', {'program': program.id, 'workoutPlan': workout.id}) }}" class="text-red-500 hover:underline">delete</a>
                    </p>
                {% else %}
                    <p class="text-white">
                        <a href="{{path ('app_exercice_details', {'id': workout.exercice.id} )}}" class="text-quaternary hover:underline">{{ workout }}</a>
                        <span> : {{workout.numberOfRepetitions}} reps of {{workout.weightsUsed}}kgs</span>
                        <a href="{{ path('removeWP_Program', {'program': program.id, 'workoutPlan': workout.id}) }}" class="text-red-500 hover:underline">delete</a>
                    </p>
                {% endif %}
                {% endfor %}
            </div>

            {% set lastWarningMessage = app.flashes('warning') | last %}

            {% if lastWarningMessage is not empty %}
                <div class="alert alert-warning bg-yellow-500 text-white p-4 rounded-lg mb-8">
                    {{ lastWarningMessage }}
                </div>
            {% endif %}

            <h2 class="text-center font-bold text-xl mb-6">Plan your workout!</h2>

            {{ form_start(formAddWorkout) }}
            {{ form_end(formAddWorkout) }}
        </div>

    {% else %}

        <div class="bg-primary/60 p-8 rounded-lg w-5/6 mt-10">
            <h1 class="text-center font-bold text-2xl px-2 py-4 mb-14">First choose what you wanna work !</h1>

            {{ form_start(formAddProgram) }}
            {{ form_row(formAddProgram.title)}}
            <div class="flex flex-row justify-between">
                {{ form_row(formAddProgram.muscleGroupTargeted) }}
                {{ form_row(formAddProgram.secondaryMuscleGroupTargeted) }}
            </div>
            {{ form_end(formAddProgram) }}
        </div>
    {% endif %}

{% endblock %}
