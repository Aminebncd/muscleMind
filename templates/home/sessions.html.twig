{% extends 'base.html.twig' %}

{% block body %}

<div id="calendar-holder"></div>

{% endblock %}

{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar-holder');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            defaultView: 'dayGridMonth',
            editable: true,
            headerToolbar: {
                start: 'prev,next today',
                center: 'title',
                end: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            timeZone: 'UTC',
            events: function (fetchInfo, successCallback, failureCallback) {
                console.log('Fetching events...');
                fetch('/calendar')
                    .then(response => response.json())
                    .then(data => {
                        console.log('Events data:', data);
                        successCallback(data);
                    })
                    .catch(error => {
                        console.error('Error fetching events:', error);
                        failureCallback(error);
                    });
            }
        });

        calendar.render();
    });
</script>
{% endblock %}